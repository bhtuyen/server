//// ------------------------------------------------------
//// THIS FILE WAS AUTOMATICALLY GENERATED (DO NOT MODIFY)
//// ------------------------------------------------------

Table Account {
  id String [pk]
  name String [not null]
  email String [unique, not null]
  password String [not null]
  avatar String
  role Role [not null, default: 'Employee']
  phone String [not null]
  orders Order [not null]
  employees Account [not null]
  owner Account
  ownerId String
  isVerified Boolean [not null, default: false]
  refreshToken RefreshToken [not null]
  sockets Socket [not null]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
}

Table Dish {
  id String [pk]
  name String [not null]
  price Decimal
  description String
  image String
  status DishStatus [not null, default: 'Available']
  category DishCategory [not null, default: 'Paid']
  options String
  dishSnapshots DishSnapshot [not null]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
  group DishGroup [not null]
  groupId String [not null]
}

Table DishSnapshot {
  id String [pk]
  name String [not null]
  price Decimal
  description String
  image String
  status DishStatus [not null, default: 'Available']
  category DishCategory [not null, default: 'Paid']
  options String
  dishId String [not null]
  dish Dish [not null]
  updatedAt DateTime [not null]
  createdAt DateTime [default: `now()`, not null]
  order Order
  group DishGroup [not null]
  groupId String [not null]
}

Table DishGroup {
  id String [pk]
  name String [unique, not null]
  dishes Dish [not null]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
  DishSnapshot DishSnapshot [not null]
}

Table Table {
  id String [pk]
  number String [unique, not null]
  capacity Int [not null]
  orders Order [not null]
  guests Guest [not null]
  status TableStatus [not null, default: 'Available']
  token String [not null]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
}

Table Order {
  id String [pk]
  guestId String [not null]
  guest Guest [not null]
  table Table [not null]
  tableNumber String [not null]
  dishSnapshot DishSnapshot [not null]
  dishSnapshotId String [unique, not null]
  options String
  quantity Int [not null]
  orderHandler Account
  orderHandlerId String
  status OrderStatus [not null, default: 'Pending']
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
}

Table RefreshToken {
  token String [pk]
  accountId String [not null]
  account Account [not null]
  expiresAt DateTime [not null]
  createdAt DateTime [default: `now()`, not null]
}

Table Guest {
  id String [pk]
  table Table [not null]
  tableNumber String [not null]
  orders Order [not null]
  refreshToken String
  refreshTokenExpiresAt DateTime
  sockets Socket [not null]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
}

Table Socket {
  socketId String [pk]
  accountId String [unique]
  account Account
  guestId String [unique]
  guest Guest
}

Enum DishStatus {
  Available
  Unavailable
  Hidden
}

Enum DishCategory {
  Buffet
  Paid
}

Enum Role {
  Owner
  Employee
  Guest
}

Enum TableStatus {
  Available
  Hidden
  Reserved
}

Enum OrderStatus {
  Pending
  Processing
  Rejected
  Delivered
  Paid
}

Ref: Account.ownerId > Account.id

Ref: Dish.groupId > DishGroup.id

Ref: DishSnapshot.dishId > Dish.id [delete: No Action]

Ref: DishSnapshot.groupId > DishGroup.id

Ref: Order.guestId > Guest.id [delete: No Action]

Ref: Order.tableNumber > Table.number [delete: No Action]

Ref: Order.dishSnapshotId - DishSnapshot.id [delete: Cascade]

Ref: Order.orderHandlerId > Account.id [delete: Set Null]

Ref: RefreshToken.accountId > Account.id [delete: Cascade]

Ref: Guest.tableNumber > Table.number [delete: No Action]

Ref: Socket.accountId > Account.id [delete: Set Null]

Ref: Socket.guestId > Guest.id [delete: Set Null]